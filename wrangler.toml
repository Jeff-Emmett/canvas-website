main = "worker/worker.ts"
compatibility_date = "2024-07-01"
name = "jeffemmett-canvas"
account_id = "${CLOUDFLARE_ACCOUNT_ID}"
zone_id = "${CLOUDFLARE_ZONE_ID}"

[vars]
DAILY_API_KEY = "${DAILY_API_KEY}"
DAILY_DOMAIN = "${DAILY_DOMAIN}"
TLDRAW_WORKER_URL = "${TLDRAW_WORKER_URL}"

[dev]
port = 5172
ip = "0.0.0.0"
local_protocol = "http"
upstream_protocol = "https"

[durable_objects]
bindings = [
    { name = "TLDRAW_DURABLE_OBJECT", class_name = "TldrawDurableObject" },
]

[[migrations]]
tag = "v1"
new_classes = ["TldrawDurableObject"]

[[r2_buckets]]
binding = 'TLDRAW_BUCKET'
bucket_name = '${R2_BUCKET_NAME}'
preview_bucket_name = '${R2_PREVIEW_BUCKET_NAME}'

[observability]
enabled = true
head_sampling_rate = 1  